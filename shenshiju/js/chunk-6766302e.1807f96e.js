(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6766302e"],{1276:function(t,e,n){"use strict";var i=n("d784"),o=n("44e7"),a=n("825a"),s=n("1d80"),c=n("4840"),l=n("8aa5"),r=n("50c4"),u=n("14c3"),d=n("9263"),h=n("d039"),f=[].push,p=Math.min,g=4294967295,v=!h((function(){return!RegExp(g,"y")}));i("split",2,(function(t,e,n){var i;return i="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var i=String(s(this)),a=void 0===n?g:n>>>0;if(0===a)return[];if(void 0===t)return[i];if(!o(t))return e.call(i,t,a);var c,l,r,u=[],h=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),p=0,v=new RegExp(t.source,h+"g");while(c=d.call(v,i)){if(l=v.lastIndex,l>p&&(u.push(i.slice(p,c.index)),c.length>1&&c.index<i.length&&f.apply(u,c.slice(1)),r=c[0].length,p=l,u.length>=a))break;v.lastIndex===c.index&&v.lastIndex++}return p===i.length?!r&&v.test("")||u.push(""):u.push(i.slice(p)),u.length>a?u.slice(0,a):u}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:e.call(this,t,n)}:e,[function(e,n){var o=s(this),a=void 0==e?void 0:e[t];return void 0!==a?a.call(e,o,n):i.call(String(o),e,n)},function(t,o){var s=n(i,t,this,o,i!==e);if(s.done)return s.value;var d=a(t),h=String(this),f=c(d,RegExp),m=d.unicode,x=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.unicode?"u":"")+(v?"y":"g"),b=new f(v?d:"^(?:"+d.source+")",x),w=void 0===o?g:o>>>0;if(0===w)return[];if(0===h.length)return null===u(b,h)?[h]:[];var y=0,_=0,C=[];while(_<h.length){b.lastIndex=v?_:0;var S,k=u(b,v?h:h.slice(_));if(null===k||(S=p(r(b.lastIndex+(v?0:_)),h.length))===y)_=l(h,_,m);else{if(C.push(h.slice(y,_)),C.length===w)return C;for(var $=1;$<=k.length-1;$++)if(C.push(k[$]),C.length===w)return C;_=y=S}}return C.push(h.slice(y)),C}]}),!v)},"498a":function(t,e,n){"use strict";var i=n("23e7"),o=n("58a8").trim,a=n("c8d2");i({target:"String",proto:!0,forced:a("trim")},{trim:function(){return o(this)}})},5274:function(t,e,n){"use strict";var i=n("aac5"),o=n.n(i);o.a},7803:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"register"},[n("div",{staticClass:"main"},[n("h6",[t._v("绑定手机号")]),n("p",[t._v("未注册过的手机号码将自动注册为村墅人家用户")]),n("van-form",{on:{submit:t.onSubmit}},[n("div",{staticClass:"tel"},[n("van-field",{attrs:{name:"pattern",clearable:"",placeholder:"请输入手机号",rules:[{pattern:t.pattern,message:"请输入正确内容"}]},model:{value:t.tel,callback:function(e){t.tel=e},expression:"tel"}})],1),n("div",{staticClass:"code flex_be"},[n("van-field",{attrs:{name:"pattern",clearable:"",placeholder:"请输入验证码",rules:[{pattern:t.pattern1,message:"请输入正确内容"}]},model:{value:t.code1,callback:function(e){t.code1=e},expression:"code1"}}),60==t.tmeValue?n("span",{on:{click:t.getauth}},[t._v("获取验证码")]):n("span",[t._v(t._s(t.tmeValue)+" s 后获取")])],1),n("div",[n("van-button",{staticClass:"button",attrs:{block:"","native-type":"submit"}},[t._v("登录")])],1)]),n("p",{staticClass:"agreement text_cen"},[t._v("注册/登录即表示同意")]),n("div",{staticClass:"text_cen"},[n("van-icon",{attrs:{name:"cross"},on:{click:t.closeGoLogin}})],1)],1)])},o=[],a=(n("c975"),n("fb6a"),n("d3b7"),n("4d63"),n("ac1f"),n("25f0"),n("466d"),n("841c"),n("1276"),n("498a"),n("2ade")),s={data:function(){return{tel:"",code1:"",pattern:/\d{11}/,pattern1:/\d{4}/,tmeValue:60,flag:0,code:""}},watch:{code1:function(){this.code1=this.code1.trim().slice(0,6)}},methods:{getauth:function(){var t=this,e=this;/^1[34578]\d{9}$/.test(e.tel)?a["a"].getCode({phone_num:e.tel}).then((function(n){0==n.code?(console.log(n,"短信"),t.$toast("发送成功"),e.time()):t.$toast("发送失败")})).catch((function(){t.$toast("发送失败")})).finally((function(){})):this.$toast("手机号格式不正确")},wxLogin:function(t){var e=this;a["a"].getWXInfo({code:t}).then((function(t){console.log(t,"微信信息"),e.$toast("微信授权成功")})).catch((function(){})).finally((function(){}))},getCode:function(){var t=this.getUrlParam("code"),e=window.location.href;console.log(t),null==t||""===t?window.location.href="https://open.weixin.qq.com/connect/oauth2/authorize?appid=wxe960929de0880424&redirect_uri="+encodeURIComponent(e)+"&response_type=code&scope=snsapi_userinfo&state=1#wechat_redirect":(this.wxLogin(t),this.code=t)},getUrlParam:function(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),n=window.location.search.substr(1).match(e);return null!=n?unescape(n[2]):null},time:function(){var t=this;if(this.tmeValue=this.tmeValue-1,this.flag=1,this.tmeValue<=0)return this.tmeValue=60,this.flag=0,"";setTimeout((function(){t.time()}),1e3)},onSubmit:function(t){var e=this,n=localStorage.getItem("oppid");a["a"].loginByMsg({phone_num:this.tel,msg_code:this.code1,openid:n||""}).then((function(t){if(console.log(t),0==t.code){e.$store.commit("settoken",t.data),localStorage.setItem("istoken",t.data.token),console.log(localStorage.getItem("istoken")),e.$toast("登录成功");var n=location.search,i=new Object;if(-1!=n.indexOf("?"))for(var o=n.substr(1),a=o.split("&"),s=0;s<a.length;s++)i[a[s].split("=")[0]]=a[s].split("=")[1];e.wxLogin(i),e.$router.push({path:"/"})}else e.$toast("验证码错误")})).catch((function(){e.$toast("登录失败")})).finally((function(){})),console.log("submit",t)},closeGoLogin:function(){this.$router.push({path:"/login"})}}},c=s,l=(n("5274"),n("2877")),r=Object(l["a"])(c,i,o,!1,null,"661500de",null);e["default"]=r.exports},aac5:function(t,e,n){},c8d2:function(t,e,n){var i=n("d039"),o=n("5899"),a="​᠎";t.exports=function(t){return i((function(){return!!o[t]()||a[t]()!=a||o[t].name!==t}))}},c975:function(t,e,n){"use strict";var i=n("23e7"),o=n("4d64").indexOf,a=n("a640"),s=n("ae40"),c=[].indexOf,l=!!c&&1/[1].indexOf(1,-0)<0,r=a("indexOf"),u=s("indexOf",{ACCESSORS:!0,1:0});i({target:"Array",proto:!0,forced:l||!r||!u},{indexOf:function(t){return l?c.apply(this,arguments)||0:o(this,t,arguments.length>1?arguments[1]:void 0)}})},fb6a:function(t,e,n){"use strict";var i=n("23e7"),o=n("861d"),a=n("e8b5"),s=n("23cb"),c=n("50c4"),l=n("fc6a"),r=n("8418"),u=n("b622"),d=n("1dde"),h=n("ae40"),f=d("slice"),p=h("slice",{ACCESSORS:!0,0:0,1:2}),g=u("species"),v=[].slice,m=Math.max;i({target:"Array",proto:!0,forced:!f||!p},{slice:function(t,e){var n,i,u,d=l(this),h=c(d.length),f=s(t,h),p=s(void 0===e?h:e,h);if(a(d)&&(n=d.constructor,"function"!=typeof n||n!==Array&&!a(n.prototype)?o(n)&&(n=n[g],null===n&&(n=void 0)):n=void 0,n===Array||void 0===n))return v.call(d,f,p);for(i=new(void 0===n?Array:n)(m(p-f,0)),u=0;f<p;f++,u++)f in d&&r(i,u,d[f]);return i.length=u,i}})}}]);