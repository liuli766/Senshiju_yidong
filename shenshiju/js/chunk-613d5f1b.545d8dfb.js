(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-613d5f1b"],{7703:function(e,t,a){"use strict";var s=a("8494"),i=a.n(s);i.a},"80ca":function(e,t,a){},8494:function(e,t,a){},c073:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"surepay"},[a("div",{staticClass:"nav_bar flex"},[a("van-icon",{attrs:{name:"arrow-left"},on:{click:e.go}}),a("span",[e._v("确认支付")])],1),e._m(0),a("div",{staticClass:"addr flex_be",on:{click:function(t){return e.gonewshippingAddr(e.orderaddress)}}},[a("div",{staticClass:"flex_be"},[a("van-icon",{attrs:{name:"location-o"}}),0==e.orderaddress.length?a("span",[e._v("请填写收货地址")]):a("div",[a("span",{staticClass:"info"},[e._v(e._s(e.orderaddress.name)+" "+e._s(e.orderaddress.phone))]),a("div",{staticClass:"flex_cen",staticStyle:{"font-size":"0.25rem"}},[a("span",{staticClass:"express"},[e._v("快递")]),e._v(" "+e._s(e.orderaddress.province)+e._s(e.orderaddress.city)+e._s(e.orderaddress.district)+e._s(e.orderaddress.address)+" ")])])],1),a("van-icon",{attrs:{name:"arrow"}})],1),a("div",{staticStyle:{"padding-bottom":"1rem"}},[a("div",{staticClass:"itemlist flex"},[a("img",{attrs:{src:e.orderdetail.cover,alt:""}}),a("div",[a("p",[e._v(e._s(e.orderdetail.title))]),a("div",{staticClass:"price flex_be"},[a("span",[e._v("¥"+e._s(e.orderdetail.price))]),a("van-stepper",{attrs:{theme:"round","button-size":"22",disabled:""},model:{value:e.orderdetail.num,callback:function(t){e.$set(e.orderdetail,"num",t)},expression:"orderdetail.num"}})],1)])]),a("div",{staticClass:"message"},[a("h6",[e._v("买家留言")]),a("van-field",{attrs:{rows:"4",autosize:"",type:"textarea",placeholder:"建议留言前先于商家沟通","show-word-limit":""},model:{value:e.message,callback:function(t){e.message=t},expression:"message"}})],1),a("div",{staticClass:"money"},[a("div",{staticClass:"flex_be"},[a("span",[e._v("商品金额")]),a("span",[e._v("¥"+e._s(e.total))])]),e._m(1)])]),a("div",{staticClass:"btn flex_be"},[a("div",[e._v(" 合计： "),a("span",{staticStyle:{}},[e._v(e._s(e.total))])]),a("div",{staticClass:"onsubmit",on:{click:e.gopay}},[e._v("立即付款")])])])},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pickup_type flex_be"},[a("span",[e._v("取货方式")]),a("span",[e._v("快递")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"flex_be"},[a("span",[e._v("运费")]),a("span",[e._v("¥0.00")])])}],n=(a("d3b7"),a("5530")),r=a("2f62"),o=a("2ade"),d={components:{},computed:Object(n["a"])({},Object(r["b"])({token:function(e){return e.token},userInfor:function(e){return e.userInfor},navactivechoseid:function(e){return e.navactivechoseid},orderTime:function(e){return e.orderTime}})),data:function(){return{message:"",value:1,orderaddress:[],orderdetail:[],total:0,creatime:"",daoTim:"",msg:""}},created:function(){var e=this;console.log(this.$route.query.bid),o["a"].getBlueOrder({uid:this.userInfor.member_id,bid:this.$route.query.bid}).then((function(t){if(2==t.code)return e.$router.push({path:"/login"}),!1;e.orderaddress=t.data.address,e.orderdetail=t.data.goods,e.total=t.data.total,console.log(t,"图纸购买生成订单")})).catch((function(){})).finally((function(){}))},methods:{wechatPay:function(){var e=this;o["a"].getBluePay({uid:this.userInfor.member_id,bid:this.$route.query.bid,address:this.orderaddress.id}).then((function(e){var t=e.data.apiToay;WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:t.appId,timeStamp:t.timeStamp,nonceStr:t.nonceStr,package:t.package,signType:t.signType,paySign:t.paySign},(function(e){"get_brand_wcpay_request:ok"==e.err_msg?(this.$toast("支付成功"),setTimeout((function(){this.$router.push({path:"/success",query:{price:e.data.total}})}),2e3)):(this.$toast("支付失败"),setTimeout((function(){this.$router.push({path:"/orderpay"})}),2e3))}))})).catch((function(){e.$toast("系统异常")})).finally((function(){}))},gopay:function(){"undefined"==typeof WeixinJSBridge?(this.$toast("支付失败"),document.addEventListener?document.addEventListener("WeixinJSBridgeReady",this.wechatPay,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",this.wechatPay),document.attachEvent("onWeixinJSBridgeReady",this.wechatPay))):this.wechatPay()},go:function(){this.$router.go(-1)},gonewshippingAddr:function(e){console.log(e),this.$router.push({path:"/newshippingAddr",query:{item:e}})}}},c=d,u=(a("f9d9"),a("7703"),a("2877")),l=Object(u["a"])(c,s,i,!1,null,"ae7d3eb0",null);t["default"]=l.exports},f9d9:function(e,t,a){"use strict";var s=a("80ca"),i=a.n(s);i.a}}]);
//# sourceMappingURL=chunk-613d5f1b.545d8dfb.js.map