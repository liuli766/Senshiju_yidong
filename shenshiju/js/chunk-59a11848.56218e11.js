(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-59a11848"],{"25c3":function(t,e,a){"use strict";var n=a("fea8"),s=a.n(n);s.a},7803:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"register"},[a("div",{staticClass:"main"},[a("h6",[t._v("绑定手机号")]),a("p",[t._v("未注册过的手机号码将自动注册为村墅人家用户")]),a("van-form",{on:{submit:t.onSubmit}},[a("div",{staticClass:"tel"},[a("van-field",{attrs:{name:"pattern",clearable:"",placeholder:"请输入手机号",rules:[{pattern:t.pattern,message:"请输入正确内容"}]},model:{value:t.tel,callback:function(e){t.tel=e},expression:"tel"}})],1),a("div",{staticClass:"code flex_be"},[a("van-field",{attrs:{name:"pattern",clearable:"",placeholder:"请输入验证码",rules:[{pattern:t.pattern1,message:"请输入正确内容"}]},model:{value:t.code,callback:function(e){t.code=e},expression:"code"}}),60==t.tmeValue?a("span",{on:{click:t.getauth}},[t._v("获取验证码")]):a("span",[t._v(t._s(t.tmeValue)+" s 后获取")])],1),a("div",[a("van-button",{staticClass:"button",attrs:{block:"","native-type":"submit"}},[t._v("登录")])],1)]),a("p",{staticClass:"agreement text_cen"},[t._v("注册/登录即表示同意")]),a("div",{staticClass:"text_cen"},[a("van-icon",{attrs:{name:"cross"},on:{click:t.closeGoLogin}})],1)],1)])},s=[],o=(a("d3b7"),a("2ade")),i={data:function(){return{tel:"",code:"",pattern:/\d{11}/,pattern1:/\d{4}/,tmeValue:60,flag:0}},methods:{getauth:function(){var t=this,e=this;/^1[34578]\d{9}$/.test(e.tel)?o["a"].getCode({phone_num:e.tel}).then((function(a){0==a.code?(console.log(a,"短信"),t.$toast(a.data),e.time()):t.$toast("发送失败")})).catch((function(){t.$toast("发送失败")})).finally((function(){})):this.$toast("手机号格式不正确")},time:function(){var t=this;if(this.tmeValue=this.tmeValue-1,this.flag=1,this.tmeValue<=0)return this.tmeValue=60,this.flag=0,"";setTimeout((function(){t.time()}),1e3)},onSubmit:function(t){var e=this;o["a"].loginByMsg({phone_num:this.tel,msg_code:this.code}).then((function(t){console.log(t),0==t.code?(e.$store.commit("settoken",t.data),localStorage.setItem("istoken",t.data.token),console.log(localStorage.getItem("istoken")),e.$toast("登录成功"),e.$router.push({path:"/"})):e.$toast("验证码错误")})).catch((function(){e.$toast("登录失败")})).finally((function(){})),console.log("submit",t)},closeGoLogin:function(){this.$router.push({path:"/login"})}}},l=i,c=(a("25c3"),a("2877")),u=Object(c["a"])(l,n,s,!1,null,"4de07fbc",null);e["default"]=u.exports},fea8:function(t,e,a){}}]);
//# sourceMappingURL=chunk-59a11848.56218e11.js.map