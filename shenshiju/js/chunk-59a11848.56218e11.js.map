{"version":3,"sources":["webpack:///./src/views/register.vue?b9e2","webpack:///./src/views/register.vue?6ba9","webpack:///src/views/register.vue","webpack:///./src/views/register.vue?273d","webpack:///./src/views/register.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","on","onSubmit","attrs","pattern","message","model","value","callback","$$v","tel","expression","pattern1","code","tmeValue","getauth","_s","closeGoLogin","staticRenderFns","data","flag","methods","test","that","request","console","log","res","time","$toast","setTimeout","localStorage","setItem","token","getItem","path","values","$router","push","component"],"mappings":"kHAAA,yBAAyiB,EAAG,G,yCCA5iB,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,YAAY,CAACF,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACF,EAAG,KAAK,CAACJ,EAAIO,GAAG,WAAWH,EAAG,IAAI,CAACJ,EAAIO,GAAG,2BAA2BH,EAAG,WAAW,CAACI,GAAG,CAAC,OAASR,EAAIS,WAAW,CAACL,EAAG,MAAM,CAACE,YAAY,OAAO,CAACF,EAAG,YAAY,CAACM,MAAM,CAAC,KAAO,UAAU,UAAY,GAAG,YAAc,SAAS,MAAQ,CAAC,CAAEC,QAASX,EAAIW,QAASC,QAAS,aAAcC,MAAM,CAACC,MAAOd,EAAO,IAAEe,SAAS,SAAUC,GAAMhB,EAAIiB,IAAID,GAAKE,WAAW,UAAU,GAAGd,EAAG,MAAM,CAACE,YAAY,gBAAgB,CAACF,EAAG,YAAY,CAACM,MAAM,CAAC,KAAO,UAAU,UAAY,GAAG,YAAc,SAAS,MAAQ,CAAC,CAAEC,QAAQX,EAAImB,SAAUP,QAAS,aAAcC,MAAM,CAACC,MAAOd,EAAQ,KAAEe,SAAS,SAAUC,GAAMhB,EAAIoB,KAAKJ,GAAKE,WAAW,UAAyB,IAAdlB,EAAIqB,SAAcjB,EAAG,OAAO,CAACI,GAAG,CAAC,MAAQR,EAAIsB,UAAU,CAACtB,EAAIO,GAAG,WAAWH,EAAG,OAAO,CAACJ,EAAIO,GAAGP,EAAIuB,GAAGvB,EAAIqB,UAAU,aAAa,GAAGjB,EAAG,MAAM,CAACA,EAAG,aAAa,CAACE,YAAY,SAASI,MAAM,CAAC,MAAQ,GAAG,cAAc,WAAW,CAACV,EAAIO,GAAG,SAAS,KAAKH,EAAG,IAAI,CAACE,YAAY,sBAAsB,CAACN,EAAIO,GAAG,gBAAgBH,EAAG,MAAM,CAACE,YAAY,YAAY,CAACF,EAAG,WAAW,CAACM,MAAM,CAAC,KAAO,SAASF,GAAG,CAAC,MAAQR,EAAIwB,iBAAiB,IAAI,MAC5qCC,EAAkB,G,wBC2CtB,GACEC,KADF,WAEI,MAAO,CACLT,IAAK,GACLG,KAAM,GACNT,QAAS,SACTQ,SAAU,QACVE,SAAU,GACVM,KAAM,IAGVC,QAAS,CACPN,QADJ,WACA,WACA,OACU,kBAAkBO,KAAKC,EAAKb,KAC9Bc,EAAR,KACA,SACU,UAAV,QAEA,kBACA,WACYC,QAAQC,IAAIC,EAAK,MAGjB,EAAZ,eACYJ,EAAKK,QAEL,EAAZ,kBAGA,kBACU,EAAV,kBAEA,wBAEQlC,KAAKmC,OAAO,aAGhBD,KA3BJ,WA2BA,WAIM,GAFAlC,KAAKoB,SAAWpB,KAAKoB,SAAW,EAChCpB,KAAK0B,KAAO,EACR1B,KAAKoB,UAAY,EAGnB,OAFApB,KAAKoB,SAAW,GAChBpB,KAAK0B,KAAO,EACL,GAEPU,YAAW,WACT,EAAV,SACA,MAGI5B,SAzCJ,SAyCA,cACMsB,EAAN,KACA,YACQ,UAAR,SACQ,SAAR,YAEA,kBACQ,QAAR,OACA,WACU,EAAV,iCACUO,aAAaC,QAAQ,UAAWL,EAAIR,KAAKc,OACzCR,QAAQC,IAAIK,aAAaG,QAAQ,YACjC,EAAV,eACU,EAAV,cACYC,KAAM,OAGR,EAAV,mBAGA,kBACQ,EAAR,kBAEA,wBACMV,QAAQC,IAAI,SAAUU,IAExBnB,aAnEJ,WAoEMvB,KAAK2C,QAAQC,KAAK,CAChBH,KAAM,cC5HoU,I,wBCQ9UI,EAAY,eACd,EACA/C,EACA0B,GACA,EACA,KACA,WACA,MAIa,aAAAqB,E","file":"js/chunk-59a11848.56218e11.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./register.vue?vue&type=style&index=0&id=4de07fbc&lang=less&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./register.vue?vue&type=style&index=0&id=4de07fbc&lang=less&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"register\"},[_c('div',{staticClass:\"main\"},[_c('h6',[_vm._v(\"绑定手机号\")]),_c('p',[_vm._v(\"未注册过的手机号码将自动注册为村墅人家用户\")]),_c('van-form',{on:{\"submit\":_vm.onSubmit}},[_c('div',{staticClass:\"tel\"},[_c('van-field',{attrs:{\"name\":\"pattern\",\"clearable\":\"\",\"placeholder\":\"请输入手机号\",\"rules\":[{ pattern: _vm.pattern, message: '请输入正确内容' }]},model:{value:(_vm.tel),callback:function ($$v) {_vm.tel=$$v},expression:\"tel\"}})],1),_c('div',{staticClass:\"code flex_be\"},[_c('van-field',{attrs:{\"name\":\"pattern\",\"clearable\":\"\",\"placeholder\":\"请输入验证码\",\"rules\":[{ pattern:_vm.pattern1, message: '请输入正确内容' }]},model:{value:(_vm.code),callback:function ($$v) {_vm.code=$$v},expression:\"code\"}}),(_vm.tmeValue==60)?_c('span',{on:{\"click\":_vm.getauth}},[_vm._v(\"获取验证码\")]):_c('span',[_vm._v(_vm._s(_vm.tmeValue)+\" s 后获取\")])],1),_c('div',[_c('van-button',{staticClass:\"button\",attrs:{\"block\":\"\",\"native-type\":\"submit\"}},[_vm._v(\"登录\")])],1)]),_c('p',{staticClass:\"agreement text_cen\"},[_vm._v(\"注册/登录即表示同意\")]),_c('div',{staticClass:\"text_cen\"},[_c('van-icon',{attrs:{\"name\":\"cross\"},on:{\"click\":_vm.closeGoLogin}})],1)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <!-- 注册页面 -->\r\n  <div class=\"register\">\r\n    <div class=\"main\">\r\n      <h6>绑定手机号</h6>\r\n      <p>未注册过的手机号码将自动注册为村墅人家用户</p>\r\n      <van-form @submit=\"onSubmit\">\r\n        <div class=\"tel\">\r\n          <van-field\r\n            v-model=\"tel\"\r\n            name=\"pattern\"\r\n            clearable\r\n            placeholder=\"请输入手机号\"\r\n            :rules=\"[{ pattern, message: '请输入正确内容' }]\"\r\n          />\r\n        </div>\r\n\r\n        <div class=\"code flex_be\">\r\n          <van-field\r\n            v-model=\"code\"\r\n            name=\"pattern\"\r\n            clearable\r\n            placeholder=\"请输入验证码\"\r\n            :rules=\"[{ pattern:pattern1, message: '请输入正确内容' }]\"\r\n          />\r\n          <span v-if=\"tmeValue==60\" @click=\"getauth\">获取验证码</span>\r\n          <span v-else>{{ tmeValue }} s 后获取</span>\r\n        </div>\r\n\r\n        <div>\r\n          <van-button block class=\"button\" native-type=\"submit\">登录</van-button>\r\n        </div>\r\n      </van-form>\r\n      <p class=\"agreement text_cen\">注册/登录即表示同意</p>\r\n      <div class=\"text_cen\">\r\n        <van-icon name=\"cross\" @click=\"closeGoLogin\" />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// import { mapState } from \"vuex\";\r\nimport request from \"@/request.js\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      tel: \"\",\r\n      code: \"\",\r\n      pattern: /\\d{11}/,\r\n      pattern1: /\\d{4}/,\r\n      tmeValue: 60, //获取验证码时间\r\n      flag: 0,\r\n    };\r\n  },\r\n  methods: {\r\n    getauth() {\r\n      let that = this;\r\n      if (/^1[34578]\\d{9}$/.test(that.tel)) {\r\n        request\r\n          .getCode({\r\n            phone_num: that.tel,\r\n          })\r\n          .then((res) => {\r\n            if (res.code == 0) {\r\n            console.log(res, \"短信\");\r\n\r\n            // this.$toast(\"发送成功\");\r\n            this.$toast(res.data);\r\n            that.time();\r\n            } else {\r\n              this.$toast(\"发送失败\");\r\n            }\r\n          })\r\n          .catch(() => {\r\n            this.$toast(\"发送失败\");\r\n          })\r\n          .finally(() => {});\r\n      } else {\r\n        this.$toast(\"手机号格式不正确\");\r\n      }\r\n    },\r\n    time() {\r\n      //倒计时\r\n      this.tmeValue = this.tmeValue - 1;\r\n      this.flag = 1;\r\n      if (this.tmeValue <= 0) {\r\n        this.tmeValue = 60;\r\n        this.flag = 0;\r\n        return \"\";\r\n      } else {\r\n        setTimeout(() => {\r\n          this.time();\r\n        }, 1000);\r\n      }\r\n    },\r\n    onSubmit(values) {\r\n      request\r\n        .loginByMsg({\r\n          phone_num: this.tel,\r\n          msg_code: this.code,\r\n        })\r\n        .then((res) => {\r\n          console.log(res)\r\n          if (res.code == 0) {\r\n          this.$store.commit(\"settoken\", res.data);\r\n          localStorage.setItem(\"istoken\", res.data.token);\r\n          console.log(localStorage.getItem('istoken'))\r\n          this.$toast(\"登录成功\");\r\n          this.$router.push({\r\n            path: \"/\",\r\n          });\r\n          } else {\r\n            this.$toast(\"验证码错误\");\r\n          }\r\n        })\r\n        .catch(() => {\r\n          this.$toast(\"登录失败\");\r\n        })\r\n        .finally(() => {});\r\n      console.log(\"submit\", values);\r\n    },\r\n    closeGoLogin() {\r\n      this.$router.push({\r\n        path: \"/login\",\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n@import \"../styles/index.less\";\r\n@import \"../styles/variable.less\";\r\n.register {\r\n  background-color: #eee;\r\n  height: 100%;\r\n  position: fixed;\r\n  width: 100%;\r\n  font-family: SimHei;\r\n  .main {\r\n    background: #fff;\r\n    .margin(217,20,0,20);\r\n  }\r\n  h6 {\r\n    color: #202020;\r\n    text-align: center;\r\n    .fs(32);\r\n    font-weight: bold;\r\n    .lh(77);\r\n  }\r\n  p {\r\n    color: #424242;\r\n    font-family: SimHei;\r\n    .fs(24);\r\n    .lh(58);\r\n    .ml(44);\r\n  }\r\n  .code {\r\n    border-bottom: 1px solid #eee;\r\n    .margin(0, 18);\r\n    span {\r\n      display: flex;\r\n      width: 38%;\r\n      color: #979797;\r\n      .fs(32);\r\n    }\r\n  }\r\n  .van-cell::after {\r\n    border-bottom: 0;\r\n  }\r\n  .van-icon {\r\n    .mb(30);\r\n  }\r\n  .tel {\r\n    .margin(0, 18);\r\n    border-bottom: 1px solid #eee;\r\n  }\r\n  .button {\r\n    background: #fe9e15;\r\n    color: #fff;\r\n    .fs(36);\r\n    .b-radius(10);\r\n    margin: auto;\r\n    .mt(60);\r\n    .w(699);\r\n  }\r\n  .agreement {\r\n    line-height: 1;\r\n    .mt(47);\r\n    .mb(82);\r\n  }\r\n}\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./register.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./register.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./register.vue?vue&type=template&id=4de07fbc&scoped=true&\"\nimport script from \"./register.vue?vue&type=script&lang=js&\"\nexport * from \"./register.vue?vue&type=script&lang=js&\"\nimport style0 from \"./register.vue?vue&type=style&index=0&id=4de07fbc&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4de07fbc\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}