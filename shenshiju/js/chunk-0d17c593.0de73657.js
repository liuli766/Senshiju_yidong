(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0d17c593"],{"4f4c":function(t,e,a){},7784:function(t,e,a){"use strict";var s=a("4f4c"),n=a.n(s);n.a},a93c:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"surepay"},[a("div",{staticClass:"nav_bar flex"},[a("van-icon",{attrs:{name:"arrow-left"},on:{click:t.go}}),a("span",[t._v("确认支付")])],1),t._m(0),a("div",{staticClass:"addr flex_be",on:{click:function(e){return t.gonewshippingAddr(t.orderaddress)}}},[a("div",{staticClass:"flex_be"},[a("van-icon",{attrs:{name:"location-o"}}),0==t.orderaddress.length?a("span",{on:{click:t.gonewshippingAddr1}},[t._v("请填写收货地址")]):a("div",[a("span",{staticClass:"info",staticStyle:{"margin-bottom":"0.2rem",display:"block"}},[t._v(t._s(t.orderaddress.name)+" "+t._s(t.orderaddress.phone))]),a("div",{staticClass:"flex_cen",staticStyle:{"font-size":"0.25rem"}},[a("span",{staticClass:"express"},[t._v("快递")]),t._v(" "+t._s(t.orderaddress.province)+t._s(t.orderaddress.city)+t._s(t.orderaddress.district)+t._s(t.orderaddress.address)+" ")])])],1),a("van-icon",{attrs:{name:"arrow"}})],1),a("div",{staticStyle:{"padding-bottom":"1rem"}},[t._l(t.orderdetail,(function(e,s){return a("div",{key:s,staticClass:"itemlist flex"},[a("img",{attrs:{src:e.cover,alt:""}}),a("div",[a("p",[t._v(t._s(e.title))]),a("div",{staticClass:"price flex_be"},[a("span",[t._v("¥"+t._s(e.price))]),a("van-stepper",{attrs:{theme:"round","button-size":"22",disabled:""},model:{value:e.num,callback:function(a){t.$set(e,"num",a)},expression:"item.num"}})],1)])])})),a("div",{staticClass:"message"},[a("h6",[t._v("买家留言")]),a("van-field",{attrs:{rows:"4",autosize:"",type:"textarea",placeholder:"建议留言前先于商家沟通","show-word-limit":""},model:{value:t.message,callback:function(e){t.message=e},expression:"message"}})],1),a("div",{staticClass:"money"},[a("div",{staticClass:"flex_be"},[a("span",[t._v("商品金额")]),a("span",[t._v("¥"+t._s(t.total))])]),t._m(1)])],2),a("div",{staticClass:"btn flex_be"},[a("div",[t._v(" 合计： "),a("span",{staticStyle:{}},[t._v(t._s(t.total))])]),a("div",{staticClass:"onsubmit",on:{click:t.onSubmit}},[t._v("立即付款")])])])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pickup_type flex_be"},[a("span",[t._v("取货方式")]),a("span",[t._v("快递")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"flex_be"},[a("span",[t._v("运费")]),a("span",[t._v("¥0.00")])])}],i=(a("d3b7"),a("5530")),r=a("2f62"),o=a("2ade"),d={computed:Object(i["a"])({},Object(r["b"])({token:function(t){return t.token},userInfor:function(t){return t.userInfor},navactivechoseid:function(t){return t.navactivechoseid}})),data:function(){return{message:"",value:1,orderaddress:[],orderdetail:[],total:0}},created:function(){var t=this;console.log(this.$route.query.arr),o["a"].getCartOrder({uid:this.userInfor.member_id,ids:this.$route.query.arr}).then((function(e){console.log(e,"订单结算"),t.orderaddress=e.data.address,t.orderdetail=e.data.goods,t.total=e.data.total})).catch((function(){})).finally((function(){}))},methods:{onSubmit:function(){this.gopay()},wechatPay:function(){var t=this;o["a"].getCartPay({uid:this.userInfor.member_id,ids:this.$route.query.arr}).then((function(e){var a=e.data.apiToay,s=t;WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:a.appId,timeStamp:a.timeStamp,nonceStr:a.nonceStr,package:a.package,signType:a.signType,paySign:a.paySign},(function(t){"get_brand_wcpay_request:ok"==t.err_msg?(s.$toast("支付成功"),setTimeout((function(){s.$router.push({path:"/success",query:{price:t.data.total}})}),2e3)):(s.$toast("支付失败"),setTimeout((function(){s.$router.push({path:"/orderpay"})}),2e3))}))})).catch((function(){t.$toast("系统异常")})).finally((function(){}))},gopay:function(){var t=this;"undefined"==typeof WeixinJSBridge?(t.$toast("支付失败"),document.addEventListener?document.addEventListener("WeixinJSBridgeReady",t.wechatPay,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",t.wechatPay),document.attachEvent("onWeixinJSBridgeReady",t.wechatPay))):t.wechatPay()},go:function(){this.$router.push({path:"/cart"})},gonewshippingAddr:function(t){this.$router.push({path:"/newshippingAddr",query:{item:t}})},gonewshippingAddr1:function(){this.$router.push({path:"/newshippingAddr"})}}},c=d,u=(a("7784"),a("f02b"),a("2877")),l=Object(u["a"])(c,s,n,!1,null,"791527be",null);e["default"]=l.exports},d749:function(t,e,a){},f02b:function(t,e,a){"use strict";var s=a("d749"),n=a.n(s);n.a}}]);